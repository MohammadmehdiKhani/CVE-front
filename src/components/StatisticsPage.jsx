import React, { useState, useEffect } from "react";
import "../style/home.css";
import StatisticsTable from "./StatisticsTable";
import http from "../services/httpService.js";

function StatisticsPage() {
  const [programs, setPrograms] = useState([]);

  useEffect(() => {
    async function fetchData() {
      const response = await http.get("http://localhost:3001/my-programs", {
        headers: { "x-auth-token": localStorage.getItem("token") },
      });
      setPrograms(response.data);
    }
    fetchData();
  }, []);

  return (
    <div className="HomePage-container">
      <div className="mt-5 farsi-bold">تعداد ناامنی‌های هر برنامه</div>
      <StatisticsTable items={programs}></StatisticsTable>
    </div>
  );
}

export default StatisticsPage;
