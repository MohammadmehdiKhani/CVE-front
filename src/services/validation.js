import Joi, { schema } from "joi-browser";

export const validate = (data, schema) => {
  const joiOptions = { abortEarly: false };
  const result = Joi.validate(data, schema, joiOptions);

  if (!result.error) return null;

  const joiErrors = {};
  for (let item of result.error.details) joiErrors[item.path[0]] = item.message;
  return joiErrors;
};

export const validateField = (e, schema) => {
  const object = { [e.target.name]: e.target.value };
  const subSchema = { [e.target.name]: schema[e.target.name] };
  const { error } = Joi.validate(object, subSchema);
  return error ? error.details[0].message : null;
};
